<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Danh sách Chuyến đi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div class="flex h-screen overflow-hidden">
      <aside th:replace="~{manager/tour :: #sidebar}"></aside>

      <div class="flex-1 flex flex-col overflow-y-auto">
        <header
          class="flex items-center justify-between p-6 bg-white border-b border-gray-200"
        >
          <div>
            <a th:href="@{/manager/tour}" class="text-blue-600 hover:underline"
              ><i class="fas fa-arrow-left mr-2"></i>Quay lại Quản lý Tour</a
            >
            <h1 class="text-2xl font-semibold text-gray-800 mt-2">
              Danh sách Chuyến đi của Tour:
              <span class="text-blue-600" th:text="${tour.tenTour}"></span>
            </h1>
          </div>
        </header>

        <main class="flex-1 p-6">
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left text-gray-600">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                  <tr>
                    <th scope="col" class="px-6 py-4">Ngày Đi</th>
                    <th scope="col" class="px-6 py-4">Ngày Về</th>
                    <th scope="col" class="px-6 py-4">Trạng Thái</th>
                    <th scope="col" class="px-6 py-4">Số Lượng Tối Đa</th>
                    <th scope="col" class="px-6 py-4 text-center">Hành Động</th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    th:each="chuyen : ${chuyenDuLichList}"
                    class="bg-white border-b hover:bg-gray-50"
                  >
                    <td
                      class="px-6 py-4"
                      th:text="${#temporals.format(chuyen.ngayBatDau, 'dd-MM-yyyy')}"
                    ></td>
                    <td
                      class="px-6 py-4"
                      th:text="${#temporals.format(chuyen.ngayKetThuc, 'dd-MM-yyyy')}"
                    ></td>
                    <td class="px-6 py-4">
                      <span
                        class="px-2 py-1 font-semibold leading-tight rounded-full"
                        th:text="${chuyen.trangThai}"
                        th:classappend="${chuyen.trangThai == 'Sắp diễn ra'} ? 'bg-blue-100 text-blue-800' : 
                                                          (${chuyen.trangThai == 'Đang diễn ra'} ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800')"
                      >
                      </span>
                    </td>
                    <td class="px-6 py-4" th:text="${chuyen.soLuongToiDa}"></td>
                    <td class="px-6 py-4 text-center">
                      <a
                        th:href="@{/manager/tour/trips/{id}(id=${chuyen.maChuyen})}"
                        class="font-medium text-blue-600 hover:underline"
                      >
                        Xem chi tiết
                      </a>
                      <a
                        th:href="@{/manager/tour/trips/edit/{id}(id=${chuyen.maChuyen})}"
                        class="font-medium text-yellow-600 hover:underline ml-4"
                      >
                        Sửa
                      </a>
                      <a
                        th:href="@{/manager/tour/trips/delete/{id}(id=${chuyen.maChuyen})}"
                        class="font-medium text-red-600 hover:underline ml-4"
                        onclick="return confirm('Bạn có chắc chắn muốn xóa chuyến đi này không?');"
                      >
                        Xóa
                      </a>
                    </td>
                  </tr>
                  <tr th:if="${#lists.isEmpty(chuyenDuLichList)}">
                    <td colspan="5" class="text-center p-4 text-gray-500">
                      Chưa có chuyến đi nào được tạo cho tour này.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
